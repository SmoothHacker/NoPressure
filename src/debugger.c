#include "debugger.h"char NoPressure_x64_regs[27][10] = {        "r15", "r14", "r13", "r12", "rbp",        "rbx", "r11", "r10", "r9", "r8", "rax",        "rcx", "rdx","rsi", "rdi", "orig_rax",        "rip", "cs", "eflags", "rsp", "ss", "fs_base",        "gs_base", "ds", "es", "fs", "gs"};void mainDebuggerLoop(debugSession *debugHandle) {    int wait_status;    int options = 0;    waitpid(debugHandle->programPID, &wait_status, options);    char line[250];    printf("NoPressure> ");    while(fgets(line, 250, stdin) != NULL) {        int commandResult = handleCommandInput(line);        switch (commandResult) {            case PRINT_REGISTERS: printRegisters(debugHandle); break;            case CONTINUE: continueExec(debugHandle); break;            case QUIT: exit(0);            case SINGLE_STEP: singleStep(debugHandle); break;            default: printf("Unknown Command\n"); break;        }        printf("NoPressure> ");    }};int handleCommandInput(char *line) {    if(!strcmp("info registers\n", line)) {        return PRINT_REGISTERS;    } else if (!strcmp("continue\n", line)) {        return CONTINUE;    } else if (!strcmp("q\n", line)) {        return QUIT;    } else if (!strcmp("s\n", line)) {        return SINGLE_STEP;    } else {        return -1;    }};int printRegisters(debugSession *debugHandle) {    ptrace(PTRACE_GETREGS, debugHandle->programPID, NULL, &debugHandle->programRegs);    unsigned long long *regPtr = &debugHandle->programRegs->rax;    for (int i = 0; i < 27; ++i) {        printf("%s: 0x%llx\n", NoPressure_x64_regs[i], *regPtr++);    }    return 0;};int continueExec(debugSession *debugHandle) {    ptrace(PTRACE_CONT, debugHandle->programPID, NULL, NULL);    int wait_status;    waitpid(debugHandle->programPID, &wait_status, 0);    return 0;};int singleStep(debugSession *debugHandle) {    ptrace(PTRACE_SINGLESTEP, debugHandle->programPID, NULL, NULL);    int wait_status;    waitpid(debugHandle->programPID, &wait_status, 0);    printRegisters(debugHandle);    return 0;};int printDisassembly(debugSession *debugHandle) {    return 0;}